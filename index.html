<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMC ULTRA</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #050505; --card: #111; --accent: #f0b90b; --red: #ff4444; }
        body { background: var(--bg); color: #fff; font-family: -apple-system, sans-serif; margin: 0; padding: 15px; }
        
        /* –ñ–µ—Å—Ç–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏ */
        .screen { display: none !important; }
        .screen.active { display: flex !important; flex-direction: column; }

        .btn { 
            background: #1a1a1a; border: 1px solid #333; color: #fff; 
            padding: 25px; border-radius: 18px; font-size: 18px; font-weight: bold; 
            margin-bottom: 12px; cursor: pointer; text-align: left;
            display: flex; justify-content: space-between; align-items: center;
        }
        .btn-gold { border-left: 5px solid var(--accent); }
        .btn-red { border-left: 5px solid var(--red); }

        /* –ö–∞–ª–µ–Ω–¥–∞—Ä—å */
        .cal-box { background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid #222; }
        .grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-top: 15px; }
        .day { aspect-ratio: 1; background: #1a1a1a; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 11px; color: #444; position: relative; }
        .day.done { color: #fff; }
        .day.done::after { content: ''; position: absolute; width: 5px; height: 5px; background: var(--red); border-radius: 50%; bottom: 4px; box-shadow: 0 0 8px var(--red); }

        #tv-chart { height: 350px; background: #000; border-radius: 15px; border: 1px solid #222; margin-bottom: 15px; }
        .back-link { color: var(--accent); padding: 10px 0; cursor: pointer; font-size: 14px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="scr-main" class="screen active">
        <h1 style="color: var(--accent); margin-bottom: 30px;">SMC SYSTEM V3</h1>
        
        <button class="btn btn-gold" onclick="nav('scr-analysis')">
            <span>üîç –ù–ê–ß–ê–¢–¨ –ê–ù–ê–õ–ò–ó 4H</span>
            <span>‚Üí</span>
        </button>

        <button class="btn btn-red" onclick="nav('scr-calendar')">
            <span>üìÖ –ö–ê–õ–ï–ù–î–ê–†–¨ –î–ò–°–¶–ò–ü–õ–ò–ù–´</span>
            <span>‚Üí</span>
        </button>

        <button class="btn" onclick="nav('scr-terminal')">
            <span>üìä –¢–û–†–ì–û–í–´–ô –¢–ï–†–ú–ò–ù–ê–õ</span>
            <span>‚Üí</span>
        </button>
    </div>

    <div id="scr-terminal" class="screen">
        <div class="back-link" onclick="nav('scr-main')">‚Üê –ù–ê–ó–ê–î –í –ú–ï–ù–Æ</div>
        <div id="tv-chart"></div>
    </div>

    <div id="scr-calendar" class="screen">
        <div class="back-link" onclick="nav('scr-main')" style="color: var(--red);">‚Üê –ù–ê–ó–ê–î –í –ú–ï–ù–Æ</div>
        <div class="cal-box">
            <div style="display: flex; justify-content: space-between;">
                <b>–Ø–Ω–≤–∞—Ä—å 2026</b>
                <span style="color: var(--red);">80% –°—Ç—Ä–∏–∫</span>
            </div>
            <div class="grid" id="cal-render"></div>
        </div>
    </div>

    <div id="scr-analysis" class="screen">
        <div class="back-link" onclick="nav('scr-main')">‚Üê –û–¢–ú–ï–ù–ê</div>
        <div class="cal-box">
            <h2>–®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ 4H</h2>
            <p style="color: #888;">–ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ –∏–º–ø—É–ª—å—Å–∞ –∏–ª–∏ —Å–ª–æ–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ.</p>
            <button class="btn btn-gold" style="width: 100%; margin-top: 20px;" onclick="finish('–ò–º–ø—É–ª—å—Å')">–ï–°–¢–¨ –ò–ú–ü–£–õ–¨–°</button>
            <button class="btn" style="width: 100%;" onclick="finish('–ö–æ—Ä—Ä–µ–∫—Ü–∏—è')">–ö–û–†–†–ï–ö–¶–ò–Ø</button>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function nav(id) {
            // –ü—Ä—è—á–µ–º –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π
            const target = document.getElementById(id);
            if(target) target.classList.add('active');

            if(id === 'scr-terminal') {
                new TradingView.widget({
                    "autosize": true, "symbol": "BINANCE:BTCUSDT", "interval": "15",
                    "theme": "dark", "container_id": "tv-chart", "hide_top_toolbar": true
                });
            }
            if(id === 'scr-calendar') {
                const box = document.getElementById('cal-render');
                box.innerHTML = '';
                for(let i = 1; i <= 31; i++) {
                    let mark = (i >= 10 && i <= 13) ? 'done' : '';
                    box.innerHTML += `<div class="day ${mark}">${i}</div>`;
                }
            }
        }

        function finish(phase) {
            tg.sendData(JSON.stringify({type: 'analysis', phase: phase}));
            tg.close();
        }
    </script>
</body>
</html>